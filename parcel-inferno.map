{"version":3,"sources":["node_modules/inferno/dist/index.esm.js","node_modules/inferno/index.esm.js","node_modules/inferno-component/dist/index.esm.js","src/Box.js","src/Frame.js","index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["NO_OP","ERROR_MSG","isBrowser","window","document","isArray","Array","isStringOrNumber","o","type","isNullOrUndef","isUndefined","isNull","isInvalid","isTrue","isFunction","isString","isNumber","isDefined","isObject","throwError","message","Error","combineFrom","first","second","out","key","key$1","keyPrefix","getVNode","childFlags","children","className","flags","props","ref","dom","parentVNode","createVNode","childFlag","vNode","optsVNode","options","normalizeChildren","createComponentVNode","prototype","render","defaultProps","prop","defaultHooks","prop$1","createTextVNode","text","normalizeProps","undefined","directClone","vNodeToClone","newVNode","propsToClone","createVoidVNode","_normalizeVNodes","nodes","result","index","currentKey","len","length","n","newKey","oldKey","isPrefixedKey","push","getFlagsForElementVnode","newChildren","newChildFlags","Object","isFrozen","slice","i","isNullDom","isNullKey","isPrefixed","$","afterMount","afterRender","afterUpdate","beforeRender","beforeUnmount","roots","linkEvent","data","event","xlinkNS","xmlNS","svgNS","namespaces","EMPTY_OBJ","LIFECYCLE","appendChild","parentDom","insertOrAppend","newNode","nextNode","insertBefore","documentCreateElement","tag","isSVG","createElementNS","createElement","replaceChild","newDom","lastDom","removeChild","callAll","arrayFn","listener","shift","attachedEventCounts","attachedEvents","handleEvent","name","nextEvent","eventsLeft","eventsObject","$EV","attachEventToDocument","removeEventListener","normalizeEventName","dispatchEvents","target","isClick","eventData","disabled","currentEvent","cancelBubble","parentNode","substr","toLowerCase","stopPropagation","stopImmediatePropagation","docEvent","button","preventDefault","defineProperty","configurable","get","addEventListener","isSameInnerHTML","innerHTML","tempdom","isSamePropsInnerHTML","Boolean","dangerouslySetInnerHTML","__html","triggerEventListener","methodName","e","nativeListenerName","createWrappedFunction","applyValue","fnMethod","$V","newProps","enumerable","value","writable","isCheckedType","onTextInputChange","applyValueInput","wrappedOnChange","emptywrapper","wrapped","inputEvents","nextPropsOrEmpty","onchange","onclick","oninput","checked","multiple","defaultValue","hasValue","setAttribute","updateChildOptionGroup","updateChildOption","indexOf","selected","onSelectChange","applyValueSelect","selectEvents","mounting","multiplePropInBoolean","onTextareaInputChange","applyValueTextArea","wrappedOnChange$1","textAreaEvents","onChange","domValue","processElement","isControlled","addFormElementEventHandlers","isControlledFormElement","remove","unmount","unmountAllChildren","instance","ref$1","componentWillUnmount","$UN","$LI","onComponentWillUnmount","children$1","removeAllChildren","textContent","createLinkEvent","nextValue","patchEvent","lastValue","nameLowerCase","domEvent","getNumberStyleValue","style","patchStyle","lastAttrValue","nextAttrValue","domStyle","cssText","patchProp","hasControlledValue","lastVNode","lastHtml","nextHtml","removeAttribute","setAttributeNS","mountProps","isFormElement","createClassComponentInstance","Component","context","$BS","componentWillMount","$BR","$PSS","state","pending","$PS","input","handleComponentInput","childContext","getChildContext","$CX","componentVNode","mount","lifecycle","mountElement","mountComponent","mountText","createTextNode","childrenIsSVG","mountArrayChildren","mountRef","child","isClass","mountClassComponentCallbacks","$UPD","mountFunctionalComponentCallbacks","createClassMountCallback","hasAfterMount","hasDidMount","componentDidMount","createOnMountCallback","onComponentDidMount","onComponentWillMount","hydrateComponent","hydrateVNode","input$1","hydrateElement","nodeType","tagName","childNode","firstChild","nextSibling","hydrateText","nodeValue","hydrate","callback","replaceWithNewNode","lastNode","patch","nextVNode","nextFlags","patchElement","patchComponent","patchText","patchPortal","lastContainer","nextContainer","nextChildren","patchChildren","node","nextTag","lastProps","nextProps","lastPropsOrEmpty","hasOwnProperty","lastChildren","nextRef","lastClassName","nextClassName","lastChildFlags","nextChildFlags","parentDOM","lastLength","nextLength","patchKeyedChildren","patchNonKeyedChildren","updateClassComponent","nextState","force","fromSetState","lastState","renderOutput","componentWillReceiveProps","hasSCU","shouldComponentUpdate","componentWillUpdate","didUpdate","lastInput","nextInput","componentDidUpdate","nextType","lastKey","nextKey","shouldUpdate","nextHooks","nextHooksDefined","onComponentShouldUpdate","onComponentWillUpdate","onComponentDidUpdate","nextText","textNode","lastChildrenLength","nextChildrenLength","commonLength","nextChild","nextChild$1","a","b","aLength","bLength","aEnd","bEnd","aStart","bStart","j","aNode","bNode","nextPos","outer","aLeft","bLeft","sources","canRemoveWholeContent","moved","pos","patched","keyIndex","seq","lis_algorithm","arr","p","u","v","c","arrI","documentBody","body","rootLen","rootInput","splice","createRenderer","renderer","createPortal","container","resolvedPromise","Promise","resolve","fallbackMethod","requestAnimationFrame","setTimeout","bind","nextTick","fn","then","queueStateChanges","component","newState","stateKey","applyState","queue","$QU","promiseCallback","call","pendingState","prevState","forceUpdate","setState","nextContext","JSX","freeze","version","console","warn","Component$1","Box","Frame","lastLoc","onScroll","scrollY","diff","d","log","mountNode","getElementById","lastChild","module","hot","accept","bundleURL","getBundleURLCached","getBundleURL","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","href","split","Date","now","cssTimeout","reloadCSS","links","querySelectorAll"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"parcel-inferno.map","sourcesContent":["var NO_OP = '$NO_OP';\r\nvar ERROR_MSG = 'a runtime error occured! Use Inferno in development environment to find the error.';\r\n// This should be boolean and not reference to window.document\r\nvar isBrowser = !!(typeof window !== 'undefined' && window.document);\r\n// this is MUCH faster than .constructor === Array and instanceof Array\r\n// in Node 7 and the later versions of V8, slower in older versions though\r\nvar isArray = Array.isArray;\r\nfunction isStringOrNumber(o) {\r\n    var type = typeof o;\r\n    return type === 'string' || type === 'number';\r\n}\r\nfunction isNullOrUndef(o) {\r\n    return isUndefined(o) || isNull(o);\r\n}\r\nfunction isInvalid(o) {\r\n    return isNull(o) || o === false || isTrue(o) || isUndefined(o);\r\n}\r\nfunction isFunction(o) {\r\n    return typeof o === 'function';\r\n}\r\nfunction isString(o) {\r\n    return typeof o === 'string';\r\n}\r\nfunction isNumber(o) {\r\n    return typeof o === 'number';\r\n}\r\nfunction isNull(o) {\r\n    return o === null;\r\n}\r\nfunction isTrue(o) {\r\n    return o === true;\r\n}\r\nfunction isUndefined(o) {\r\n    return o === void 0;\r\n}\r\nfunction isDefined(o) {\r\n    return o !== void 0;\r\n}\r\nfunction isObject(o) {\r\n    return typeof o === 'object';\r\n}\r\nfunction throwError(message) {\r\n    if (!message) {\r\n        message = ERROR_MSG;\r\n    }\r\n    throw new Error((\"Inferno Error: \" + message));\r\n}\r\nfunction combineFrom(first, second) {\r\n    var out = {};\r\n    if (first) {\r\n        for (var key in first) {\r\n            out[key] = first[key];\r\n        }\r\n    }\r\n    if (second) {\r\n        for (var key$1 in second) {\r\n            out[key$1] = second[key$1];\r\n        }\r\n    }\r\n    return out;\r\n}\n\nvar keyPrefix = '$';\r\nfunction getVNode(childFlags, children, className, flags, key, props, ref, type) {\r\n    return {\r\n        childFlags: childFlags,\r\n        children: children,\r\n        className: className,\r\n        dom: null,\r\n        flags: flags,\r\n        key: key === void 0 ? null : key,\r\n        parentVNode: null,\r\n        props: props === void 0 ? null : props,\r\n        ref: ref === void 0 ? null : ref,\r\n        type: type\r\n    };\r\n}\r\nfunction createVNode(flags, type, className, children, childFlags, props, key, ref) {\r\n    var childFlag = childFlags === void 0 ? 1 /* HasInvalidChildren */ : childFlags;\r\n    var vNode = getVNode(childFlag, children, className, flags, key, props, ref, type);\r\n    var optsVNode = options.createVNode;\r\n    if (typeof optsVNode === 'function') {\r\n        optsVNode(vNode);\r\n    }\r\n    if (childFlag === 0 /* UnknownChildren */) {\r\n        normalizeChildren(vNode, vNode.children);\r\n    }\r\n    return vNode;\r\n}\r\nfunction createComponentVNode(flags, type, props, key, ref) {\r\n    if ((flags & 2 /* ComponentUnknown */) > 0) {\r\n        flags = isDefined(type.prototype) && isFunction(type.prototype.render) ? 4 /* ComponentClass */ : 8 /* ComponentFunction */;\r\n    }\r\n    // set default props\r\n    var defaultProps = type.defaultProps;\r\n    if (!isNullOrUndef(defaultProps)) {\r\n        if (!props) {\r\n            props = {}; // Props can be referenced and modified at application level so always create new object\r\n        }\r\n        for (var prop in defaultProps) {\r\n            if (isUndefined(props[prop])) {\r\n                props[prop] = defaultProps[prop];\r\n            }\r\n        }\r\n    }\r\n    if ((flags & 8 /* ComponentFunction */) > 0) {\r\n        var defaultHooks = type.defaultHooks;\r\n        if (!isNullOrUndef(defaultHooks)) {\r\n            if (!ref) {\r\n                // As ref cannot be referenced from application level, we can use the same refs object\r\n                ref = defaultHooks;\r\n            }\r\n            else {\r\n                for (var prop$1 in defaultHooks) {\r\n                    if (isUndefined(ref[prop$1])) {\r\n                        ref[prop$1] = defaultHooks[prop$1];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var vNode = getVNode(1 /* HasInvalidChildren */, null, null, flags, key, props, ref, type);\r\n    var optsVNode = options.createVNode;\r\n    if (isFunction(optsVNode)) {\r\n        optsVNode(vNode);\r\n    }\r\n    return vNode;\r\n}\r\nfunction createTextVNode(text, key) {\r\n    return getVNode(1 /* HasInvalidChildren */, isNullOrUndef(text) ? '' : text, null, 16 /* Text */, key, null, null, null);\r\n}\r\nfunction normalizeProps(vNode) {\r\n    var props = vNode.props;\r\n    if (props) {\r\n        var flags = vNode.flags;\r\n        if (flags & 481 /* Element */) {\r\n            if (isDefined(props.children) && isNullOrUndef(vNode.children)) {\r\n                normalizeChildren(vNode, props.children);\r\n            }\r\n            if (isDefined(props.className)) {\r\n                vNode.className = props.className || null;\r\n                props.className = undefined;\r\n            }\r\n        }\r\n        if (isDefined(props.key)) {\r\n            vNode.key = props.key;\r\n            props.key = undefined;\r\n        }\r\n        if (isDefined(props.ref)) {\r\n            if (flags & 8 /* ComponentFunction */) {\r\n                vNode.ref = combineFrom(vNode.ref, props.ref);\r\n            }\r\n            else {\r\n                vNode.ref = props.ref;\r\n            }\r\n            props.ref = undefined;\r\n        }\r\n    }\r\n    return vNode;\r\n}\r\nfunction directClone(vNodeToClone) {\r\n    var newVNode;\r\n    var flags = vNodeToClone.flags;\r\n    if (flags & 14 /* Component */) {\r\n        var props;\r\n        var propsToClone = vNodeToClone.props;\r\n        if (!isNull(propsToClone)) {\r\n            props = {};\r\n            for (var key in propsToClone) {\r\n                props[key] = propsToClone[key];\r\n            }\r\n        }\r\n        newVNode = createComponentVNode(flags, vNodeToClone.type, props, vNodeToClone.key, vNodeToClone.ref);\r\n    }\r\n    else if (flags & 481 /* Element */) {\r\n        var children = vNodeToClone.children;\r\n        newVNode = createVNode(flags, vNodeToClone.type, vNodeToClone.className, children, vNodeToClone.childFlags, vNodeToClone.props, vNodeToClone.key, vNodeToClone.ref);\r\n    }\r\n    else if (flags & 16 /* Text */) {\r\n        newVNode = createTextVNode(vNodeToClone.children, vNodeToClone.key);\r\n    }\r\n    else if (flags & 1024 /* Portal */) {\r\n        newVNode = vNodeToClone;\r\n    }\r\n    return newVNode;\r\n}\r\nfunction createVoidVNode() {\r\n    return createTextVNode('', null);\r\n}\r\nfunction _normalizeVNodes(nodes, result, index, currentKey) {\r\n    for (var len = nodes.length; index < len; index++) {\r\n        var n = nodes[index];\r\n        if (!isInvalid(n)) {\r\n            var newKey = currentKey + keyPrefix + index;\r\n            if (isArray(n)) {\r\n                _normalizeVNodes(n, result, 0, newKey);\r\n            }\r\n            else {\r\n                if (isStringOrNumber(n)) {\r\n                    n = createTextVNode(n, newKey);\r\n                }\r\n                else {\r\n                    var oldKey = n.key;\r\n                    var isPrefixedKey = isString(oldKey) && oldKey[0] === keyPrefix;\r\n                    if (!isNull(n.dom) || isPrefixedKey) {\r\n                        n = directClone(n);\r\n                    }\r\n                    if (isNull(oldKey) || isPrefixedKey) {\r\n                        n.key = newKey;\r\n                    }\r\n                    else {\r\n                        n.key = currentKey + oldKey;\r\n                    }\r\n                }\r\n                result.push(n);\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction getFlagsForElementVnode(type) {\r\n    if (type === 'svg') {\r\n        return 32 /* SvgElement */;\r\n    }\r\n    if (type === 'input') {\r\n        return 64 /* InputElement */;\r\n    }\r\n    if (type === 'select') {\r\n        return 256 /* SelectElement */;\r\n    }\r\n    if (type === 'textarea') {\r\n        return 128 /* TextareaElement */;\r\n    }\r\n    return 1 /* HtmlElement */;\r\n}\r\nfunction normalizeChildren(vNode, children) {\r\n    var newChildren;\r\n    var newChildFlags = 1 /* HasInvalidChildren */;\r\n    // Don't change children to match strict equal (===) true in patching\r\n    if (isInvalid(children)) {\r\n        newChildren = children;\r\n    }\r\n    else if (isString(children)) {\r\n        newChildFlags = 2 /* HasVNodeChildren */;\r\n        newChildren = createTextVNode(children);\r\n    }\r\n    else if (isNumber(children)) {\r\n        newChildFlags = 2 /* HasVNodeChildren */;\r\n        newChildren = createTextVNode(children + '');\r\n    }\r\n    else if (isArray(children)) {\r\n        var len = children.length;\r\n        if (len === 0) {\r\n            newChildren = null;\r\n            newChildFlags = 1 /* HasInvalidChildren */;\r\n        }\r\n        else {\r\n            // we assign $ which basically means we've flagged this array for future note\r\n            // if it comes back again, we need to clone it, as people are using it\r\n            // in an immutable way\r\n            // tslint:disable-next-line\r\n            if (Object.isFrozen(children) || children['$'] === true) {\r\n                children = children.slice();\r\n            }\r\n            newChildFlags = 8 /* HasKeyedChildren */;\r\n            for (var i = 0; i < len; i++) {\r\n                var n = children[i];\r\n                if (isInvalid(n) || isArray(n)) {\r\n                    newChildren = newChildren || children.slice(0, i);\r\n                    _normalizeVNodes(children, newChildren, i, '');\r\n                    break;\r\n                }\r\n                else if (isStringOrNumber(n)) {\r\n                    newChildren = newChildren || children.slice(0, i);\r\n                    newChildren.push(createTextVNode(n, keyPrefix + i));\r\n                }\r\n                else {\r\n                    var key = n.key;\r\n                    var isNullDom = isNull(n.dom);\r\n                    var isNullKey = isNull(key);\r\n                    var isPrefixed = !isNullKey && key[0] === keyPrefix;\r\n                    if (!isNullDom || isNullKey || isPrefixed) {\r\n                        newChildren = newChildren || children.slice(0, i);\r\n                        if (!isNullDom || isPrefixed) {\r\n                            n = directClone(n);\r\n                        }\r\n                        if (isNullKey || isPrefixed) {\r\n                            n.key = keyPrefix + i;\r\n                        }\r\n                        newChildren.push(n);\r\n                    }\r\n                    else if (newChildren) {\r\n                        newChildren.push(n);\r\n                    }\r\n                }\r\n            }\r\n            newChildren = newChildren || children;\r\n            newChildren.$ = true;\r\n        }\r\n    }\r\n    else {\r\n        newChildren = children;\r\n        if (!isNull(children.dom)) {\r\n            newChildren = directClone(children);\r\n        }\r\n        newChildFlags = 2 /* HasVNodeChildren */;\r\n    }\r\n    vNode.children = newChildren;\r\n    vNode.childFlags = newChildFlags;\r\n    return vNode;\r\n}\r\nvar options = {\r\n    afterMount: null,\r\n    afterRender: null,\r\n    afterUpdate: null,\r\n    beforeRender: null,\r\n    beforeUnmount: null,\r\n    createVNode: null,\r\n    roots: []\r\n};\n\n/**\r\n * Links given data to event as first parameter\r\n * @param {*} data data to be linked, it will be available in function as first parameter\r\n * @param {Function} event Function to be called when event occurs\r\n * @returns {{data: *, event: Function}}\r\n */\r\nfunction linkEvent(data, event) {\r\n    if (isFunction(event)) {\r\n        return { data: data, event: event };\r\n    }\r\n    return null; // Return null when event is invalid, to avoid creating unnecessary event handlers\r\n}\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\r\nvar xmlNS = 'http://www.w3.org/XML/1998/namespace';\r\nvar svgNS = 'http://www.w3.org/2000/svg';\r\nvar namespaces = {\r\n    'xlink:actuate': xlinkNS,\r\n    'xlink:arcrole': xlinkNS,\r\n    'xlink:href': xlinkNS,\r\n    'xlink:role': xlinkNS,\r\n    'xlink:show': xlinkNS,\r\n    'xlink:title': xlinkNS,\r\n    'xlink:type': xlinkNS,\r\n    'xml:base': xmlNS,\r\n    'xml:lang': xmlNS,\r\n    'xml:space': xmlNS\r\n};\n\n// We need EMPTY_OBJ defined in one place.\r\n// Its used for comparison so we cant inline it into shared\r\nvar EMPTY_OBJ = {};\r\nvar LIFECYCLE = [];\r\nfunction appendChild(parentDom, dom) {\r\n    parentDom.appendChild(dom);\r\n}\r\nfunction insertOrAppend(parentDom, newNode, nextNode) {\r\n    if (isNullOrUndef(nextNode)) {\r\n        appendChild(parentDom, newNode);\r\n    }\r\n    else {\r\n        parentDom.insertBefore(newNode, nextNode);\r\n    }\r\n}\r\nfunction documentCreateElement(tag, isSVG) {\r\n    if (isSVG === true) {\r\n        return document.createElementNS(svgNS, tag);\r\n    }\r\n    return document.createElement(tag);\r\n}\r\nfunction replaceChild(parentDom, newDom, lastDom) {\r\n    parentDom.replaceChild(newDom, lastDom);\r\n}\r\nfunction removeChild(parentDom, dom) {\r\n    parentDom.removeChild(dom);\r\n}\r\nfunction callAll(arrayFn) {\r\n    var listener;\r\n    while ((listener = arrayFn.shift()) !== undefined) {\r\n        listener();\r\n    }\r\n}\n\nvar attachedEventCounts = {};\r\nvar attachedEvents = {};\r\nfunction handleEvent(name, nextEvent, dom) {\r\n    var eventsLeft = attachedEventCounts[name];\r\n    var eventsObject = dom.$EV;\r\n    if (nextEvent) {\r\n        if (!eventsLeft) {\r\n            attachedEvents[name] = attachEventToDocument(name);\r\n            attachedEventCounts[name] = 0;\r\n        }\r\n        if (!eventsObject) {\r\n            eventsObject = dom.$EV = {};\r\n        }\r\n        if (!eventsObject[name]) {\r\n            attachedEventCounts[name]++;\r\n        }\r\n        eventsObject[name] = nextEvent;\r\n    }\r\n    else if (eventsObject && eventsObject[name]) {\r\n        attachedEventCounts[name]--;\r\n        if (eventsLeft === 1) {\r\n            document.removeEventListener(normalizeEventName(name), attachedEvents[name]);\r\n            attachedEvents[name] = null;\r\n        }\r\n        eventsObject[name] = nextEvent;\r\n    }\r\n}\r\nfunction dispatchEvents(event, target, isClick, name, eventData) {\r\n    var dom = target;\r\n    while (!isNull(dom)) {\r\n        // Html Nodes can be nested fe: span inside button in that scenario browser does not handle disabled attribute on parent,\r\n        // because the event listener is on document.body\r\n        // Don't process clicks on disabled elements\r\n        if (isClick && dom.disabled) {\r\n            return;\r\n        }\r\n        var eventsObject = dom.$EV;\r\n        if (eventsObject) {\r\n            var currentEvent = eventsObject[name];\r\n            if (currentEvent) {\r\n                // linkEvent object\r\n                eventData.dom = dom;\r\n                if (currentEvent.event) {\r\n                    currentEvent.event(currentEvent.data, event);\r\n                }\r\n                else {\r\n                    currentEvent(event);\r\n                }\r\n                if (event.cancelBubble) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        dom = dom.parentNode;\r\n    }\r\n}\r\nfunction normalizeEventName(name) {\r\n    return name.substr(2).toLowerCase();\r\n}\r\nfunction stopPropagation() {\r\n    this.cancelBubble = true;\r\n    this.stopImmediatePropagation();\r\n}\r\nfunction attachEventToDocument(name) {\r\n    var docEvent = function (event) {\r\n        var type = event.type;\r\n        var isClick = type === 'click' || type === 'dblclick';\r\n        if (isClick && event.button !== 0) {\r\n            // Firefox incorrectly triggers click event for mid/right mouse buttons.\r\n            // This bug has been active for 12 years.\r\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=184051\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            return false;\r\n        }\r\n        event.stopPropagation = stopPropagation;\r\n        // Event data needs to be object to save reference to currentTarget getter\r\n        var eventData = {\r\n            dom: document\r\n        };\r\n        Object.defineProperty(event, 'currentTarget', {\r\n            configurable: true,\r\n            get: function get() {\r\n                return eventData.dom;\r\n            }\r\n        });\r\n        dispatchEvents(event, event.target, isClick, name, eventData);\r\n        return;\r\n    };\r\n    document.addEventListener(normalizeEventName(name), docEvent);\r\n    return docEvent;\r\n}\n\nfunction isSameInnerHTML(dom, innerHTML) {\r\n    var tempdom = document.createElement('i');\r\n    tempdom.innerHTML = innerHTML;\r\n    return tempdom.innerHTML === dom.innerHTML;\r\n}\r\nfunction isSamePropsInnerHTML(dom, props) {\r\n    return Boolean(props && props.dangerouslySetInnerHTML && props.dangerouslySetInnerHTML.__html && isSameInnerHTML(dom, props.dangerouslySetInnerHTML.__html));\r\n}\n\nfunction triggerEventListener(props, methodName, e) {\r\n    if (props[methodName]) {\r\n        var listener = props[methodName];\r\n        if (listener.event) {\r\n            listener.event(listener.data, e);\r\n        }\r\n        else {\r\n            listener(e);\r\n        }\r\n    }\r\n    else {\r\n        var nativeListenerName = methodName.toLowerCase();\r\n        if (props[nativeListenerName]) {\r\n            props[nativeListenerName](e);\r\n        }\r\n    }\r\n}\r\nfunction createWrappedFunction(methodName, applyValue) {\r\n    var fnMethod = function (e) {\r\n        e.stopPropagation();\r\n        var vNode = this.$V;\r\n        // If vNode is gone by the time event fires, no-op\r\n        if (!vNode) {\r\n            return;\r\n        }\r\n        var props = vNode.props || EMPTY_OBJ;\r\n        var dom = vNode.dom;\r\n        if (isString(methodName)) {\r\n            triggerEventListener(props, methodName, e);\r\n        }\r\n        else {\r\n            for (var i = 0; i < methodName.length; i++) {\r\n                triggerEventListener(props, methodName[i], e);\r\n            }\r\n        }\r\n        if (isFunction(applyValue)) {\r\n            var newVNode = this.$V;\r\n            var newProps = newVNode.props || EMPTY_OBJ;\r\n            applyValue(newProps, dom, false, newVNode);\r\n        }\r\n    };\r\n    Object.defineProperty(fnMethod, 'wrapped', {\r\n        configurable: false,\r\n        enumerable: false,\r\n        value: true,\r\n        writable: false\r\n    });\r\n    return fnMethod;\r\n}\n\nfunction isCheckedType(type) {\r\n    return type === 'checkbox' || type === 'radio';\r\n}\r\nvar onTextInputChange = createWrappedFunction('onInput', applyValueInput);\r\nvar wrappedOnChange = createWrappedFunction(['onClick', 'onChange'], applyValueInput);\r\n/* tslint:disable-next-line:no-empty */\r\nfunction emptywrapper(event) {\r\n    event.stopPropagation();\r\n}\r\nemptywrapper.wrapped = true;\r\nfunction inputEvents(dom, nextPropsOrEmpty) {\r\n    if (isCheckedType(nextPropsOrEmpty.type)) {\r\n        dom.onchange = wrappedOnChange;\r\n        dom.onclick = emptywrapper;\r\n    }\r\n    else {\r\n        dom.oninput = onTextInputChange;\r\n    }\r\n}\r\nfunction applyValueInput(nextPropsOrEmpty, dom) {\r\n    var type = nextPropsOrEmpty.type;\r\n    var value = nextPropsOrEmpty.value;\r\n    var checked = nextPropsOrEmpty.checked;\r\n    var multiple = nextPropsOrEmpty.multiple;\r\n    var defaultValue = nextPropsOrEmpty.defaultValue;\r\n    var hasValue = !isNullOrUndef(value);\r\n    if (type && type !== dom.type) {\r\n        dom.setAttribute('type', type);\r\n    }\r\n    if (!isNullOrUndef(multiple) && multiple !== dom.multiple) {\r\n        dom.multiple = multiple;\r\n    }\r\n    if (!isNullOrUndef(defaultValue) && !hasValue) {\r\n        dom.defaultValue = defaultValue + '';\r\n    }\r\n    if (isCheckedType(type)) {\r\n        if (hasValue) {\r\n            dom.value = value;\r\n        }\r\n        if (!isNullOrUndef(checked)) {\r\n            dom.checked = checked;\r\n        }\r\n    }\r\n    else {\r\n        if (hasValue && dom.value !== value) {\r\n            dom.defaultValue = value;\r\n            dom.value = value;\r\n        }\r\n        else if (!isNullOrUndef(checked)) {\r\n            dom.checked = checked;\r\n        }\r\n    }\r\n}\n\nfunction updateChildOptionGroup(vNode, value) {\r\n    var type = vNode.type;\r\n    if (type === 'optgroup') {\r\n        var children = vNode.children;\r\n        var childFlags = vNode.childFlags;\r\n        if (childFlags & 12 /* MultipleChildren */) {\r\n            for (var i = 0, len = children.length; i < len; i++) {\r\n                updateChildOption(children[i], value);\r\n            }\r\n        }\r\n        else if (childFlags === 2 /* HasVNodeChildren */) {\r\n            updateChildOption(children, value);\r\n        }\r\n    }\r\n    else {\r\n        updateChildOption(vNode, value);\r\n    }\r\n}\r\nfunction updateChildOption(vNode, value) {\r\n    var props = vNode.props || EMPTY_OBJ;\r\n    var dom = vNode.dom;\r\n    // we do this as multiple may have changed\r\n    dom.value = props.value;\r\n    if ((isArray(value) && value.indexOf(props.value) !== -1) || props.value === value) {\r\n        dom.selected = true;\r\n    }\r\n    else if (!isNullOrUndef(value) || !isNullOrUndef(props.selected)) {\r\n        dom.selected = props.selected || false;\r\n    }\r\n}\r\nvar onSelectChange = createWrappedFunction('onChange', applyValueSelect);\r\nfunction selectEvents(dom) {\r\n    dom.onchange = onSelectChange;\r\n}\r\nfunction applyValueSelect(nextPropsOrEmpty, dom, mounting, vNode) {\r\n    var multiplePropInBoolean = Boolean(nextPropsOrEmpty.multiple);\r\n    if (!isNullOrUndef(nextPropsOrEmpty.multiple) && multiplePropInBoolean !== dom.multiple) {\r\n        dom.multiple = multiplePropInBoolean;\r\n    }\r\n    var childFlags = vNode.childFlags;\r\n    if ((childFlags & 1 /* HasInvalidChildren */) === 0) {\r\n        var children = vNode.children;\r\n        var value = nextPropsOrEmpty.value;\r\n        if (mounting && isNullOrUndef(value)) {\r\n            value = nextPropsOrEmpty.defaultValue;\r\n        }\r\n        if (childFlags & 12 /* MultipleChildren */) {\r\n            for (var i = 0, len = children.length; i < len; i++) {\r\n                updateChildOptionGroup(children[i], value);\r\n            }\r\n        }\r\n        else if (childFlags === 2 /* HasVNodeChildren */) {\r\n            updateChildOptionGroup(children, value);\r\n        }\r\n    }\r\n}\n\nvar onTextareaInputChange = createWrappedFunction('onInput', applyValueTextArea);\r\nvar wrappedOnChange$1 = createWrappedFunction('onChange');\r\nfunction textAreaEvents(dom, nextPropsOrEmpty) {\r\n    dom.oninput = onTextareaInputChange;\r\n    if (nextPropsOrEmpty.onChange) {\r\n        dom.onchange = wrappedOnChange$1;\r\n    }\r\n}\r\nfunction applyValueTextArea(nextPropsOrEmpty, dom, mounting) {\r\n    var value = nextPropsOrEmpty.value;\r\n    var domValue = dom.value;\r\n    if (isNullOrUndef(value)) {\r\n        if (mounting) {\r\n            var defaultValue = nextPropsOrEmpty.defaultValue;\r\n            if (!isNullOrUndef(defaultValue) && defaultValue !== domValue) {\r\n                dom.defaultValue = defaultValue;\r\n                dom.value = defaultValue;\r\n            }\r\n        }\r\n    }\r\n    else if (domValue !== value) {\r\n        /* There is value so keep it controlled */\r\n        dom.defaultValue = value;\r\n        dom.value = value;\r\n    }\r\n}\n\n/**\r\n * There is currently no support for switching same input between controlled and nonControlled\r\n * If that ever becomes a real issue, then re design controlled elements\r\n * Currently user must choose either controlled or non-controlled and stick with that\r\n */\r\nfunction processElement(flags, vNode, dom, nextPropsOrEmpty, mounting, isControlled) {\r\n    if (flags & 64 /* InputElement */) {\r\n        applyValueInput(nextPropsOrEmpty, dom);\r\n    }\r\n    else if (flags & 256 /* SelectElement */) {\r\n        applyValueSelect(nextPropsOrEmpty, dom, mounting, vNode);\r\n    }\r\n    else if (flags & 128 /* TextareaElement */) {\r\n        applyValueTextArea(nextPropsOrEmpty, dom, mounting);\r\n    }\r\n    if (isControlled) {\r\n        dom.$V = vNode;\r\n    }\r\n}\r\nfunction addFormElementEventHandlers(flags, dom, nextPropsOrEmpty) {\r\n    if (flags & 64 /* InputElement */) {\r\n        inputEvents(dom, nextPropsOrEmpty);\r\n    }\r\n    else if (flags & 256 /* SelectElement */) {\r\n        selectEvents(dom);\r\n    }\r\n    else if (flags & 128 /* TextareaElement */) {\r\n        textAreaEvents(dom, nextPropsOrEmpty);\r\n    }\r\n}\r\nfunction isControlledFormElement(nextPropsOrEmpty) {\r\n    return nextPropsOrEmpty.type && isCheckedType(nextPropsOrEmpty.type) ? !isNullOrUndef(nextPropsOrEmpty.checked) : !isNullOrUndef(nextPropsOrEmpty.value);\r\n}\n\nfunction remove(vNode, parentDom) {\r\n    unmount(vNode);\r\n    if (!isNull(parentDom)) {\r\n        removeChild(parentDom, vNode.dom);\r\n        // Let carbage collector free memory\r\n        vNode.dom = null;\r\n    }\r\n}\r\nfunction unmount(vNode) {\r\n    var flags = vNode.flags;\r\n    if (flags & 481 /* Element */) {\r\n        var ref = vNode.ref;\r\n        var props = vNode.props;\r\n        if (isFunction(ref)) {\r\n            ref(null);\r\n        }\r\n        var children = vNode.children;\r\n        var childFlags = vNode.childFlags;\r\n        if (childFlags & 12 /* MultipleChildren */) {\r\n            unmountAllChildren(children);\r\n        }\r\n        else if (childFlags === 2 /* HasVNodeChildren */) {\r\n            unmount(children);\r\n        }\r\n        if (!isNull(props)) {\r\n            for (var name in props) {\r\n                switch (name) {\r\n                    case 'onClick':\r\n                    case 'onDblClick':\r\n                    case 'onFocusIn':\r\n                    case 'onFocusOut':\r\n                    case 'onKeyDown':\r\n                    case 'onKeyPress':\r\n                    case 'onKeyUp':\r\n                    case 'onMouseDown':\r\n                    case 'onMouseMove':\r\n                    case 'onMouseUp':\r\n                    case 'onSubmit':\r\n                    case 'onTouchEnd':\r\n                    case 'onTouchMove':\r\n                    case 'onTouchStart':\r\n                        handleEvent(name, null, vNode.dom);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else if (flags & 14 /* Component */) {\r\n        var instance = vNode.children;\r\n        var ref$1 = vNode.ref;\r\n        if (flags & 4 /* ComponentClass */) {\r\n            if (isFunction(options.beforeUnmount)) {\r\n                options.beforeUnmount(vNode);\r\n            }\r\n            if (isFunction(instance.componentWillUnmount)) {\r\n                instance.componentWillUnmount();\r\n            }\r\n            if (isFunction(ref$1)) {\r\n                ref$1(null);\r\n            }\r\n            instance.$UN = true;\r\n            unmount(instance.$LI);\r\n        }\r\n        else {\r\n            if (!isNullOrUndef(ref$1) && isFunction(ref$1.onComponentWillUnmount)) {\r\n                ref$1.onComponentWillUnmount(vNode.dom, vNode.props || EMPTY_OBJ);\r\n            }\r\n            unmount(instance);\r\n        }\r\n    }\r\n    else if (flags & 1024 /* Portal */) {\r\n        var children$1 = vNode.children;\r\n        if (!isNull(children$1) && isObject(children$1)) {\r\n            remove(children$1, vNode.type);\r\n        }\r\n    }\r\n}\r\nfunction unmountAllChildren(children) {\r\n    for (var i = 0, len = children.length; i < len; i++) {\r\n        unmount(children[i]);\r\n    }\r\n}\r\nfunction removeAllChildren(dom, children) {\r\n    unmountAllChildren(children);\r\n    dom.textContent = '';\r\n}\n\nfunction createLinkEvent(linkEvent, nextValue) {\r\n    return function (e) {\r\n        linkEvent(nextValue.data, e);\r\n    };\r\n}\r\nfunction patchEvent(name, lastValue, nextValue, dom) {\r\n    var nameLowerCase = name.toLowerCase();\r\n    if (!isFunction(nextValue) && !isNullOrUndef(nextValue)) {\r\n        var linkEvent = nextValue.event;\r\n        if (linkEvent && isFunction(linkEvent)) {\r\n            dom[nameLowerCase] = createLinkEvent(linkEvent, nextValue);\r\n        }\r\n        else {\r\n        }\r\n    }\r\n    else {\r\n        var domEvent = dom[nameLowerCase];\r\n        // if the function is wrapped, that means it's been controlled by a wrapper\r\n        if (!domEvent || !domEvent.wrapped) {\r\n            dom[nameLowerCase] = nextValue;\r\n        }\r\n    }\r\n}\r\nfunction getNumberStyleValue(style, value) {\r\n    switch (style) {\r\n        case 'animationIterationCount':\r\n        case 'borderImageOutset':\r\n        case 'borderImageSlice':\r\n        case 'borderImageWidth':\r\n        case 'boxFlex':\r\n        case 'boxFlexGroup':\r\n        case 'boxOrdinalGroup':\r\n        case 'columnCount':\r\n        case 'fillOpacity':\r\n        case 'flex':\r\n        case 'flexGrow':\r\n        case 'flexNegative':\r\n        case 'flexOrder':\r\n        case 'flexPositive':\r\n        case 'flexShrink':\r\n        case 'floodOpacity':\r\n        case 'fontWeight':\r\n        case 'gridColumn':\r\n        case 'gridRow':\r\n        case 'lineClamp':\r\n        case 'lineHeight':\r\n        case 'opacity':\r\n        case 'order':\r\n        case 'orphans':\r\n        case 'stopOpacity':\r\n        case 'strokeDasharray':\r\n        case 'strokeDashoffset':\r\n        case 'strokeMiterlimit':\r\n        case 'strokeOpacity':\r\n        case 'strokeWidth':\r\n        case 'tabSize':\r\n        case 'widows':\r\n        case 'zIndex':\r\n        case 'zoom':\r\n            return value;\r\n        default:\r\n            return value + 'px';\r\n    }\r\n}\r\n// We are assuming here that we come from patchProp routine\r\n// -nextAttrValue cannot be null or undefined\r\nfunction patchStyle(lastAttrValue, nextAttrValue, dom) {\r\n    var domStyle = dom.style;\r\n    var style;\r\n    var value;\r\n    if (isString(nextAttrValue)) {\r\n        domStyle.cssText = nextAttrValue;\r\n        return;\r\n    }\r\n    if (!isNullOrUndef(lastAttrValue) && !isString(lastAttrValue)) {\r\n        for (style in nextAttrValue) {\r\n            // do not add a hasOwnProperty check here, it affects performance\r\n            value = nextAttrValue[style];\r\n            if (value !== lastAttrValue[style]) {\r\n                domStyle[style] = isNumber(value) ? getNumberStyleValue(style, value) : value;\r\n            }\r\n        }\r\n        for (style in lastAttrValue) {\r\n            if (isNullOrUndef(nextAttrValue[style])) {\r\n                domStyle[style] = '';\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        for (style in nextAttrValue) {\r\n            value = nextAttrValue[style];\r\n            domStyle[style] = isNumber(value) ? getNumberStyleValue(style, value) : value;\r\n        }\r\n    }\r\n}\r\nfunction patchProp(prop, lastValue, nextValue, dom, isSVG, hasControlledValue, lastVNode) {\r\n    switch (prop) {\r\n        case 'onClick':\r\n        case 'onDblClick':\r\n        case 'onFocusIn':\r\n        case 'onFocusOut':\r\n        case 'onKeyDown':\r\n        case 'onKeyPress':\r\n        case 'onKeyUp':\r\n        case 'onMouseDown':\r\n        case 'onMouseMove':\r\n        case 'onMouseUp':\r\n        case 'onSubmit':\r\n        case 'onTouchEnd':\r\n        case 'onTouchMove':\r\n        case 'onTouchStart':\r\n            handleEvent(prop, nextValue, dom);\r\n            break;\r\n        case 'children':\r\n        case 'childrenType':\r\n        case 'className':\r\n        case 'defaultValue':\r\n        case 'key':\r\n        case 'multiple':\r\n        case 'ref':\r\n            return;\r\n        case 'allowfullscreen':\r\n        case 'autoFocus':\r\n        case 'autoplay':\r\n        case 'capture':\r\n        case 'checked':\r\n        case 'controls':\r\n        case 'default':\r\n        case 'disabled':\r\n        case 'hidden':\r\n        case 'indeterminate':\r\n        case 'loop':\r\n        case 'muted':\r\n        case 'novalidate':\r\n        case 'open':\r\n        case 'readOnly':\r\n        case 'required':\r\n        case 'reversed':\r\n        case 'scoped':\r\n        case 'seamless':\r\n        case 'selected':\r\n            prop = prop === 'autoFocus' ? prop.toLowerCase() : prop;\r\n            dom[prop] = !!nextValue;\r\n            break;\r\n        case 'defaultChecked':\r\n        case 'value':\r\n        case 'volume':\r\n            if (hasControlledValue && prop === 'value') {\r\n                return;\r\n            }\r\n            var value = isNullOrUndef(nextValue) ? '' : nextValue;\r\n            if (dom[prop] !== value) {\r\n                dom[prop] = value;\r\n            }\r\n            break;\r\n        case 'dangerouslySetInnerHTML':\r\n            var lastHtml = (lastValue && lastValue.__html) || '';\r\n            var nextHtml = (nextValue && nextValue.__html) || '';\r\n            if (lastHtml !== nextHtml) {\r\n                if (!isNullOrUndef(nextHtml) && !isSameInnerHTML(dom, nextHtml)) {\r\n                    if (!isNull(lastVNode)) {\r\n                        if (lastVNode.childFlags & 12 /* MultipleChildren */) {\r\n                            unmountAllChildren(lastVNode.children);\r\n                        }\r\n                        else if (lastVNode.childFlags === 2 /* HasVNodeChildren */) {\r\n                            unmount(lastVNode.children);\r\n                        }\r\n                        lastVNode.children = null;\r\n                        lastVNode.childFlags = 1 /* HasInvalidChildren */;\r\n                    }\r\n                    dom.innerHTML = nextHtml;\r\n                }\r\n            }\r\n            break;\r\n        default:\r\n            if (prop[0] === 'o' && prop[1] === 'n') {\r\n                patchEvent(prop, lastValue, nextValue, dom);\r\n            }\r\n            else if (isNullOrUndef(nextValue)) {\r\n                dom.removeAttribute(prop);\r\n            }\r\n            else if (prop === 'style') {\r\n                patchStyle(lastValue, nextValue, dom);\r\n            }\r\n            else if (isSVG && namespaces[prop]) {\r\n                // We optimize for NS being boolean. Its 99.9% time false\r\n                // If we end up in this path we can read property again\r\n                dom.setAttributeNS(namespaces[prop], prop, nextValue);\r\n            }\r\n            else {\r\n                dom.setAttribute(prop, nextValue);\r\n            }\r\n            break;\r\n    }\r\n}\r\nfunction mountProps(vNode, flags, props, dom, isSVG) {\r\n    var hasControlledValue = false;\r\n    var isFormElement = (flags & 448 /* FormElement */) > 0;\r\n    if (isFormElement) {\r\n        hasControlledValue = isControlledFormElement(props);\r\n        if (hasControlledValue) {\r\n            addFormElementEventHandlers(flags, dom, props);\r\n        }\r\n    }\r\n    for (var prop in props) {\r\n        // do not add a hasOwnProperty check here, it affects performance\r\n        patchProp(prop, null, props[prop], dom, isSVG, hasControlledValue, null);\r\n    }\r\n    if (isFormElement) {\r\n        processElement(flags, vNode, dom, props, true, hasControlledValue);\r\n    }\r\n}\n\nfunction createClassComponentInstance(vNode, Component, props, context) {\r\n    var instance = new Component(props, context);\r\n    vNode.children = instance;\r\n    instance.$V = vNode;\r\n    instance.$BS = false;\r\n    instance.context = context;\r\n    if (instance.props === EMPTY_OBJ) {\r\n        instance.props = props;\r\n    }\r\n    instance.$UN = false;\r\n    if (isFunction(instance.componentWillMount)) {\r\n        instance.$BR = true;\r\n        instance.componentWillMount();\r\n        if (instance.$PSS) {\r\n            var state = instance.state;\r\n            var pending = instance.$PS;\r\n            if (isNull(state)) {\r\n                instance.state = pending;\r\n            }\r\n            else {\r\n                for (var key in pending) {\r\n                    state[key] = pending[key];\r\n                }\r\n            }\r\n            instance.$PSS = false;\r\n            instance.$PS = null;\r\n        }\r\n        instance.$BR = false;\r\n    }\r\n    if (isFunction(options.beforeRender)) {\r\n        options.beforeRender(instance);\r\n    }\r\n    var input = handleComponentInput(instance.render(props, instance.state, context), vNode);\r\n    var childContext;\r\n    if (isFunction(instance.getChildContext)) {\r\n        childContext = instance.getChildContext();\r\n    }\r\n    if (isNullOrUndef(childContext)) {\r\n        instance.$CX = context;\r\n    }\r\n    else {\r\n        instance.$CX = combineFrom(context, childContext);\r\n    }\r\n    if (isFunction(options.afterRender)) {\r\n        options.afterRender(instance);\r\n    }\r\n    instance.$LI = input;\r\n    return instance;\r\n}\r\nfunction handleComponentInput(input, componentVNode) {\r\n    if (isInvalid(input)) {\r\n        input = createVoidVNode();\r\n    }\r\n    else if (isStringOrNumber(input)) {\r\n        input = createTextVNode(input, null);\r\n    }\r\n    else {\r\n        if (input.dom) {\r\n            input = directClone(input);\r\n        }\r\n        if (input.flags & 14 /* Component */) {\r\n            // if we have an input that is also a component, we run into a tricky situation\r\n            // where the root vNode needs to always have the correct DOM entry\r\n            // we can optimise this in the future, but this gets us out of a lot of issues\r\n            input.parentVNode = componentVNode;\r\n        }\r\n    }\r\n    return input;\r\n}\n\nfunction mount(vNode, parentDom, lifecycle, context, isSVG) {\r\n    var flags = vNode.flags;\r\n    if (flags & 481 /* Element */) {\r\n        return mountElement(vNode, parentDom, lifecycle, context, isSVG);\r\n    }\r\n    if (flags & 14 /* Component */) {\r\n        return mountComponent(vNode, parentDom, lifecycle, context, isSVG, (flags & 4 /* ComponentClass */) > 0);\r\n    }\r\n    if (flags & 512 /* Void */ || flags & 16 /* Text */) {\r\n        return mountText(vNode, parentDom);\r\n    }\r\n    if (flags & 1024 /* Portal */) {\r\n        mount(vNode.children, vNode.type, lifecycle, context, false);\r\n        return (vNode.dom = mountText(createVoidVNode(), parentDom));\r\n    }\r\n}\r\nfunction mountText(vNode, parentDom) {\r\n    var dom = (vNode.dom = document.createTextNode(vNode.children));\r\n    if (!isNull(parentDom)) {\r\n        appendChild(parentDom, dom);\r\n    }\r\n    return dom;\r\n}\r\nfunction mountElement(vNode, parentDom, lifecycle, context, isSVG) {\r\n    var flags = vNode.flags;\r\n    var children = vNode.children;\r\n    var props = vNode.props;\r\n    var className = vNode.className;\r\n    var ref = vNode.ref;\r\n    var childFlags = vNode.childFlags;\r\n    isSVG = isSVG || (flags & 32 /* SvgElement */) > 0;\r\n    var dom = documentCreateElement(vNode.type, isSVG);\r\n    vNode.dom = dom;\r\n    if (!isNullOrUndef(className) && className !== '') {\r\n        if (isSVG) {\r\n            dom.setAttribute('class', className);\r\n        }\r\n        else {\r\n            dom.className = className;\r\n        }\r\n    }\r\n    if (!isNull(parentDom)) {\r\n        appendChild(parentDom, dom);\r\n    }\r\n    if ((childFlags & 1 /* HasInvalidChildren */) === 0) {\r\n        var childrenIsSVG = isSVG === true && vNode.type !== 'foreignObject';\r\n        if (childFlags === 2 /* HasVNodeChildren */) {\r\n            mount(children, dom, lifecycle, context, childrenIsSVG);\r\n        }\r\n        else if (childFlags & 12 /* MultipleChildren */) {\r\n            mountArrayChildren(children, dom, lifecycle, context, childrenIsSVG);\r\n        }\r\n    }\r\n    if (!isNull(props)) {\r\n        mountProps(vNode, flags, props, dom, isSVG);\r\n    }\r\n    if (isFunction(ref)) {\r\n        mountRef(dom, ref, lifecycle);\r\n    }\r\n    return dom;\r\n}\r\nfunction mountArrayChildren(children, dom, lifecycle, context, isSVG) {\r\n    for (var i = 0, len = children.length; i < len; i++) {\r\n        var child = children[i];\r\n        if (!isNull(child.dom)) {\r\n            children[i] = child = directClone(child);\r\n        }\r\n        mount(child, dom, lifecycle, context, isSVG);\r\n    }\r\n}\r\nfunction mountComponent(vNode, parentDom, lifecycle, context, isSVG, isClass) {\r\n    var dom;\r\n    var type = vNode.type;\r\n    var props = vNode.props || EMPTY_OBJ;\r\n    var ref = vNode.ref;\r\n    if (isClass) {\r\n        var instance = createClassComponentInstance(vNode, type, props, context);\r\n        vNode.dom = dom = mount(instance.$LI, null, lifecycle, instance.$CX, isSVG);\r\n        mountClassComponentCallbacks(vNode, ref, instance, lifecycle);\r\n        instance.$UPD = false;\r\n    }\r\n    else {\r\n        var input = handleComponentInput(type(props, context), vNode);\r\n        vNode.children = input;\r\n        vNode.dom = dom = mount(input, null, lifecycle, context, isSVG);\r\n        mountFunctionalComponentCallbacks(props, ref, dom, lifecycle);\r\n    }\r\n    if (!isNull(parentDom)) {\r\n        appendChild(parentDom, dom);\r\n    }\r\n    return dom;\r\n}\r\nfunction createClassMountCallback(instance, hasAfterMount, afterMount, vNode, hasDidMount) {\r\n    return function () {\r\n        instance.$UPD = true;\r\n        if (hasAfterMount) {\r\n            afterMount(vNode);\r\n        }\r\n        if (hasDidMount) {\r\n            instance.componentDidMount();\r\n        }\r\n        instance.$UPD = false;\r\n    };\r\n}\r\nfunction mountClassComponentCallbacks(vNode, ref, instance, lifecycle) {\r\n    if (isFunction(ref)) {\r\n        ref(instance);\r\n    }\r\n    else {\r\n    }\r\n    var hasDidMount = isFunction(instance.componentDidMount);\r\n    var afterMount = options.afterMount;\r\n    var hasAfterMount = isFunction(afterMount);\r\n    if (hasDidMount || hasAfterMount) {\r\n        lifecycle.push(createClassMountCallback(instance, hasAfterMount, afterMount, vNode, hasDidMount));\r\n    }\r\n}\r\n// Create did mount callback lazily to avoid creating function context if not needed\r\nfunction createOnMountCallback(ref, dom, props) {\r\n    return function () { return ref.onComponentDidMount(dom, props); };\r\n}\r\nfunction mountFunctionalComponentCallbacks(props, ref, dom, lifecycle) {\r\n    if (!isNullOrUndef(ref)) {\r\n        if (isFunction(ref.onComponentWillMount)) {\r\n            ref.onComponentWillMount(props);\r\n        }\r\n        if (isFunction(ref.onComponentDidMount)) {\r\n            lifecycle.push(createOnMountCallback(ref, dom, props));\r\n        }\r\n    }\r\n}\r\nfunction mountRef(dom, value, lifecycle) {\r\n    lifecycle.push(function () { return value(dom); });\r\n}\n\nfunction hydrateComponent(vNode, dom, lifecycle, context, isSVG, isClass) {\r\n    var type = vNode.type;\r\n    var ref = vNode.ref;\r\n    var props = vNode.props || EMPTY_OBJ;\r\n    if (isClass) {\r\n        var instance = createClassComponentInstance(vNode, type, props, context);\r\n        var input = instance.$LI;\r\n        hydrateVNode(input, dom, lifecycle, instance.$CX, isSVG);\r\n        vNode.dom = input.dom;\r\n        mountClassComponentCallbacks(vNode, ref, instance, lifecycle);\r\n        instance.$UPD = false; // Mount finished allow going sync\r\n    }\r\n    else {\r\n        var input$1 = handleComponentInput(type(props, context), vNode);\r\n        hydrateVNode(input$1, dom, lifecycle, context, isSVG);\r\n        vNode.children = input$1;\r\n        vNode.dom = input$1.dom;\r\n        mountFunctionalComponentCallbacks(props, ref, dom, lifecycle);\r\n    }\r\n}\r\nfunction hydrateElement(vNode, dom, lifecycle, context, isSVG) {\r\n    var children = vNode.children;\r\n    var props = vNode.props;\r\n    var className = vNode.className;\r\n    var flags = vNode.flags;\r\n    var ref = vNode.ref;\r\n    isSVG = isSVG || (flags & 32 /* SvgElement */) > 0;\r\n    if (dom.nodeType !== 1 || dom.tagName.toLowerCase() !== vNode.type) {\r\n        var newDom = mountElement(vNode, null, lifecycle, context, isSVG);\r\n        vNode.dom = newDom;\r\n        replaceChild(dom.parentNode, newDom, dom);\r\n    }\r\n    else {\r\n        vNode.dom = dom;\r\n        var childNode = dom.firstChild;\r\n        var childFlags = vNode.childFlags;\r\n        if ((childFlags & 1 /* HasInvalidChildren */) === 0) {\r\n            var nextSibling = null;\r\n            while (childNode) {\r\n                nextSibling = childNode.nextSibling;\r\n                if (childNode.nodeType === 8) {\r\n                    if (childNode.data === '!') {\r\n                        dom.replaceChild(document.createTextNode(''), childNode);\r\n                    }\r\n                    else {\r\n                        dom.removeChild(childNode);\r\n                    }\r\n                }\r\n                childNode = nextSibling;\r\n            }\r\n            childNode = dom.firstChild;\r\n            if (childFlags === 2 /* HasVNodeChildren */) {\r\n                if (isNull(childNode)) {\r\n                    mount(children, dom, lifecycle, context, isSVG);\r\n                }\r\n                else {\r\n                    nextSibling = childNode.nextSibling;\r\n                    hydrateVNode(children, childNode, lifecycle, context, isSVG);\r\n                    childNode = nextSibling;\r\n                }\r\n            }\r\n            else if (childFlags & 12 /* MultipleChildren */) {\r\n                for (var i = 0, len = children.length; i < len; i++) {\r\n                    var child = children[i];\r\n                    if (isNull(childNode)) {\r\n                        mount(child, dom, lifecycle, context, isSVG);\r\n                    }\r\n                    else {\r\n                        nextSibling = childNode.nextSibling;\r\n                        hydrateVNode(child, childNode, lifecycle, context, isSVG);\r\n                        childNode = nextSibling;\r\n                    }\r\n                }\r\n            }\r\n            // clear any other DOM nodes, there should be only a single entry for the root\r\n            while (childNode) {\r\n                nextSibling = childNode.nextSibling;\r\n                dom.removeChild(childNode);\r\n                childNode = nextSibling;\r\n            }\r\n        }\r\n        else if (!isNull(dom.firstChild) && !isSamePropsInnerHTML(dom, props)) {\r\n            dom.textContent = ''; // dom has content, but VNode has no children remove everything from DOM\r\n            if (flags & 448 /* FormElement */) {\r\n                // If element is form element, we need to clear defaultValue also\r\n                dom.defaultValue = '';\r\n            }\r\n        }\r\n        if (!isNull(props)) {\r\n            mountProps(vNode, flags, props, dom, isSVG);\r\n        }\r\n        if (isNullOrUndef(className)) {\r\n            if (dom.className !== '') {\r\n                dom.removeAttribute('class');\r\n            }\r\n        }\r\n        else if (isSVG) {\r\n            dom.setAttribute('class', className);\r\n        }\r\n        else {\r\n            dom.className = className;\r\n        }\r\n        if (isFunction(ref)) {\r\n            mountRef(dom, ref, lifecycle);\r\n        }\r\n        else {\r\n        }\r\n    }\r\n}\r\nfunction hydrateText(vNode, dom) {\r\n    if (dom.nodeType !== 3) {\r\n        var newDom = mountText(vNode, null);\r\n        vNode.dom = newDom;\r\n        replaceChild(dom.parentNode, newDom, dom);\r\n    }\r\n    else {\r\n        var text = vNode.children;\r\n        if (dom.nodeValue !== text) {\r\n            dom.nodeValue = text;\r\n        }\r\n        vNode.dom = dom;\r\n    }\r\n}\r\nfunction hydrateVNode(vNode, dom, lifecycle, context, isSVG) {\r\n    var flags = vNode.flags;\r\n    if (flags & 14 /* Component */) {\r\n        hydrateComponent(vNode, dom, lifecycle, context, isSVG, (flags & 4 /* ComponentClass */) > 0);\r\n    }\r\n    else if (flags & 481 /* Element */) {\r\n        hydrateElement(vNode, dom, lifecycle, context, isSVG);\r\n    }\r\n    else if (flags & 16 /* Text */) {\r\n        hydrateText(vNode, dom);\r\n    }\r\n    else if (flags & 512 /* Void */) {\r\n        vNode.dom = dom;\r\n    }\r\n    else {\r\n        throwError();\r\n    }\r\n}\r\nfunction hydrate(input, parentDom, callback) {\r\n    var dom = parentDom.firstChild;\r\n    if (!isNull(dom)) {\r\n        if (!isInvalid(input)) {\r\n            hydrateVNode(input, dom, LIFECYCLE, EMPTY_OBJ, false);\r\n        }\r\n        dom = parentDom.firstChild;\r\n        // clear any other DOM nodes, there should be only a single entry for the root\r\n        while ((dom = dom.nextSibling)) {\r\n            parentDom.removeChild(dom);\r\n        }\r\n    }\r\n    if (LIFECYCLE.length > 0) {\r\n        callAll(LIFECYCLE);\r\n    }\r\n    if (!parentDom.$V) {\r\n        options.roots.push(parentDom);\r\n    }\r\n    parentDom.$V = input;\r\n    if (isFunction(callback)) {\r\n        callback();\r\n    }\r\n}\n\nfunction replaceWithNewNode(lastNode, nextNode, parentDom, lifecycle, context, isSVG) {\r\n    unmount(lastNode);\r\n    replaceChild(parentDom, mount(nextNode, null, lifecycle, context, isSVG), lastNode.dom);\r\n}\r\nfunction patch(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG) {\r\n    if (lastVNode !== nextVNode) {\r\n        var nextFlags = nextVNode.flags | 0;\r\n        if (lastVNode.flags !== nextFlags || nextFlags & 2048 /* ReCreate */) {\r\n            replaceWithNewNode(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG);\r\n        }\r\n        else if (nextFlags & 481 /* Element */) {\r\n            patchElement(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG);\r\n        }\r\n        else if (nextFlags & 14 /* Component */) {\r\n            patchComponent(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG, (nextFlags & 4 /* ComponentClass */) > 0);\r\n        }\r\n        else if (nextFlags & 16 /* Text */) {\r\n            patchText(lastVNode, nextVNode, parentDom);\r\n        }\r\n        else if (nextFlags & 512 /* Void */) {\r\n            nextVNode.dom = lastVNode.dom;\r\n        }\r\n        else {\r\n            // Portal\r\n            patchPortal(lastVNode, nextVNode, lifecycle, context);\r\n        }\r\n    }\r\n}\r\nfunction patchPortal(lastVNode, nextVNode, lifecycle, context) {\r\n    var lastContainer = lastVNode.type;\r\n    var nextContainer = nextVNode.type;\r\n    var nextChildren = nextVNode.children;\r\n    patchChildren(lastVNode.childFlags, nextVNode.childFlags, lastVNode.children, nextChildren, lastContainer, lifecycle, context, false);\r\n    nextVNode.dom = lastVNode.dom;\r\n    if (lastContainer !== nextContainer && !isInvalid(nextChildren)) {\r\n        var node = nextChildren.dom;\r\n        lastContainer.removeChild(node);\r\n        nextContainer.appendChild(node);\r\n    }\r\n}\r\nfunction patchElement(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG) {\r\n    var nextTag = nextVNode.type;\r\n    if (lastVNode.type !== nextTag) {\r\n        replaceWithNewNode(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG);\r\n    }\r\n    else {\r\n        var dom = lastVNode.dom;\r\n        var nextFlags = nextVNode.flags;\r\n        var lastProps = lastVNode.props;\r\n        var nextProps = nextVNode.props;\r\n        var isFormElement = false;\r\n        var hasControlledValue = false;\r\n        var nextPropsOrEmpty;\r\n        nextVNode.dom = dom;\r\n        isSVG = isSVG || (nextFlags & 32 /* SvgElement */) > 0;\r\n        // inlined patchProps  -- starts --\r\n        if (lastProps !== nextProps) {\r\n            var lastPropsOrEmpty = lastProps || EMPTY_OBJ;\r\n            nextPropsOrEmpty = nextProps || EMPTY_OBJ;\r\n            if (nextPropsOrEmpty !== EMPTY_OBJ) {\r\n                isFormElement = (nextFlags & 448 /* FormElement */) > 0;\r\n                if (isFormElement) {\r\n                    hasControlledValue = isControlledFormElement(nextPropsOrEmpty);\r\n                }\r\n                for (var prop in nextPropsOrEmpty) {\r\n                    var lastValue = lastPropsOrEmpty[prop];\r\n                    var nextValue = nextPropsOrEmpty[prop];\r\n                    if (lastValue !== nextValue) {\r\n                        patchProp(prop, lastValue, nextValue, dom, isSVG, hasControlledValue, lastVNode);\r\n                    }\r\n                }\r\n            }\r\n            if (lastPropsOrEmpty !== EMPTY_OBJ) {\r\n                for (var prop$1 in lastPropsOrEmpty) {\r\n                    // do not add a hasOwnProperty check here, it affects performance\r\n                    if (!nextPropsOrEmpty.hasOwnProperty(prop$1) && !isNullOrUndef(lastPropsOrEmpty[prop$1])) {\r\n                        patchProp(prop$1, lastPropsOrEmpty[prop$1], null, dom, isSVG, hasControlledValue, lastVNode);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        var lastChildren = lastVNode.children;\r\n        var nextChildren = nextVNode.children;\r\n        var nextRef = nextVNode.ref;\r\n        var lastClassName = lastVNode.className;\r\n        var nextClassName = nextVNode.className;\r\n        if (lastChildren !== nextChildren) {\r\n            patchChildren(lastVNode.childFlags, nextVNode.childFlags, lastChildren, nextChildren, dom, lifecycle, context, isSVG && nextTag !== 'foreignObject');\r\n        }\r\n        if (isFormElement) {\r\n            processElement(nextFlags, nextVNode, dom, nextPropsOrEmpty, false, hasControlledValue);\r\n        }\r\n        // inlined patchProps  -- ends --\r\n        if (lastClassName !== nextClassName) {\r\n            if (isNullOrUndef(nextClassName)) {\r\n                dom.removeAttribute('class');\r\n            }\r\n            else if (isSVG) {\r\n                dom.setAttribute('class', nextClassName);\r\n            }\r\n            else {\r\n                dom.className = nextClassName;\r\n            }\r\n        }\r\n        if (isFunction(nextRef) && lastVNode.ref !== nextRef) {\r\n            mountRef(dom, nextRef, lifecycle);\r\n        }\r\n        else {\r\n        }\r\n    }\r\n}\r\nfunction patchChildren(lastChildFlags, nextChildFlags, lastChildren, nextChildren, parentDOM, lifecycle, context, isSVG) {\r\n    switch (lastChildFlags) {\r\n        case 2 /* HasVNodeChildren */:\r\n            switch (nextChildFlags) {\r\n                case 2 /* HasVNodeChildren */:\r\n                    patch(lastChildren, nextChildren, parentDOM, lifecycle, context, isSVG);\r\n                    break;\r\n                case 1 /* HasInvalidChildren */:\r\n                    remove(lastChildren, parentDOM);\r\n                    break;\r\n                default:\r\n                    remove(lastChildren, parentDOM);\r\n                    mountArrayChildren(nextChildren, parentDOM, lifecycle, context, isSVG);\r\n                    break;\r\n            }\r\n            break;\r\n        case 1 /* HasInvalidChildren */:\r\n            switch (nextChildFlags) {\r\n                case 2 /* HasVNodeChildren */:\r\n                    mount(nextChildren, parentDOM, lifecycle, context, isSVG);\r\n                    break;\r\n                case 1 /* HasInvalidChildren */:\r\n                    break;\r\n                default:\r\n                    mountArrayChildren(nextChildren, parentDOM, lifecycle, context, isSVG);\r\n                    break;\r\n            }\r\n            break;\r\n        default:\r\n            if (nextChildFlags & 12 /* MultipleChildren */) {\r\n                var lastLength = lastChildren.length;\r\n                var nextLength = nextChildren.length;\r\n                // Fast path's for both algorithms\r\n                if (lastLength === 0) {\r\n                    if (nextLength > 0) {\r\n                        mountArrayChildren(nextChildren, parentDOM, lifecycle, context, isSVG);\r\n                    }\r\n                }\r\n                else if (nextLength === 0) {\r\n                    removeAllChildren(parentDOM, lastChildren);\r\n                }\r\n                else if (nextChildFlags === 8 /* HasKeyedChildren */ && lastChildFlags === 8 /* HasKeyedChildren */) {\r\n                    patchKeyedChildren(lastChildren, nextChildren, parentDOM, lifecycle, context, isSVG, lastLength, nextLength);\r\n                }\r\n                else {\r\n                    patchNonKeyedChildren(lastChildren, nextChildren, parentDOM, lifecycle, context, isSVG, lastLength, nextLength);\r\n                }\r\n            }\r\n            else if (nextChildFlags === 1 /* HasInvalidChildren */) {\r\n                removeAllChildren(parentDOM, lastChildren);\r\n            }\r\n            else {\r\n                removeAllChildren(parentDOM, lastChildren);\r\n                mount(nextChildren, parentDOM, lifecycle, context, isSVG);\r\n            }\r\n            break;\r\n    }\r\n}\r\nfunction updateClassComponent(instance, nextState, nextVNode, nextProps, parentDom, lifecycle, context, isSVG, force, fromSetState) {\r\n    var lastState = instance.state;\r\n    var lastProps = instance.props;\r\n    nextVNode.children = instance;\r\n    var renderOutput;\r\n    if (instance.$UN) {\r\n        return;\r\n    }\r\n    if (lastProps !== nextProps || nextProps === EMPTY_OBJ) {\r\n        if (!fromSetState && isFunction(instance.componentWillReceiveProps)) {\r\n            instance.$BR = true;\r\n            instance.componentWillReceiveProps(nextProps, context);\r\n            // If instance component was removed during its own update do nothing...\r\n            if (instance.$UN) {\r\n                return;\r\n            }\r\n            instance.$BR = false;\r\n        }\r\n        if (instance.$PSS) {\r\n            nextState = combineFrom(nextState, instance.$PS);\r\n            instance.$PSS = false;\r\n            instance.$PS = null;\r\n        }\r\n    }\r\n    /* Update if scu is not defined, or it returns truthy value or force */\r\n    var hasSCU = isFunction(instance.shouldComponentUpdate);\r\n    if (force || !hasSCU || (hasSCU && instance.shouldComponentUpdate(nextProps, nextState, context))) {\r\n        if (isFunction(instance.componentWillUpdate)) {\r\n            instance.$BS = true;\r\n            instance.componentWillUpdate(nextProps, nextState, context);\r\n            instance.$BS = false;\r\n        }\r\n        instance.props = nextProps;\r\n        instance.state = nextState;\r\n        instance.context = context;\r\n        if (isFunction(options.beforeRender)) {\r\n            options.beforeRender(instance);\r\n        }\r\n        renderOutput = instance.render(nextProps, nextState, context);\r\n        if (isFunction(options.afterRender)) {\r\n            options.afterRender(instance);\r\n        }\r\n        var didUpdate = renderOutput !== NO_OP;\r\n        var childContext;\r\n        if (isFunction(instance.getChildContext)) {\r\n            childContext = instance.getChildContext();\r\n        }\r\n        if (isNullOrUndef(childContext)) {\r\n            childContext = context;\r\n        }\r\n        else {\r\n            childContext = combineFrom(context, childContext);\r\n        }\r\n        instance.$CX = childContext;\r\n        if (didUpdate) {\r\n            var lastInput = instance.$LI;\r\n            var nextInput = (instance.$LI = handleComponentInput(renderOutput, nextVNode));\r\n            patch(lastInput, nextInput, parentDom, lifecycle, childContext, isSVG);\r\n            if (isFunction(instance.componentDidUpdate)) {\r\n                instance.componentDidUpdate(lastProps, lastState);\r\n            }\r\n            if (isFunction(options.afterUpdate)) {\r\n                options.afterUpdate(nextVNode);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        instance.props = nextProps;\r\n        instance.state = nextState;\r\n        instance.context = context;\r\n    }\r\n    nextVNode.dom = instance.$LI.dom;\r\n}\r\nfunction patchComponent(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG, isClass) {\r\n    var nextType = nextVNode.type;\r\n    var lastKey = lastVNode.key;\r\n    var nextKey = nextVNode.key;\r\n    if (lastVNode.type !== nextType || lastKey !== nextKey) {\r\n        replaceWithNewNode(lastVNode, nextVNode, parentDom, lifecycle, context, isSVG);\r\n    }\r\n    else {\r\n        var nextProps = nextVNode.props || EMPTY_OBJ;\r\n        if (isClass) {\r\n            var instance = lastVNode.children;\r\n            instance.$UPD = true;\r\n            updateClassComponent(instance, instance.state, nextVNode, nextProps, parentDom, lifecycle, context, isSVG, false, false);\r\n            instance.$V = nextVNode;\r\n            instance.$UPD = false;\r\n        }\r\n        else {\r\n            var shouldUpdate = true;\r\n            var lastProps = lastVNode.props;\r\n            var nextHooks = nextVNode.ref;\r\n            var nextHooksDefined = !isNullOrUndef(nextHooks);\r\n            var lastInput = lastVNode.children;\r\n            nextVNode.dom = lastVNode.dom;\r\n            nextVNode.children = lastInput;\r\n            if (nextHooksDefined && isFunction(nextHooks.onComponentShouldUpdate)) {\r\n                shouldUpdate = nextHooks.onComponentShouldUpdate(lastProps, nextProps);\r\n            }\r\n            if (shouldUpdate !== false) {\r\n                if (nextHooksDefined && isFunction(nextHooks.onComponentWillUpdate)) {\r\n                    nextHooks.onComponentWillUpdate(lastProps, nextProps);\r\n                }\r\n                var nextInput = nextType(nextProps, context);\r\n                if (nextInput !== NO_OP) {\r\n                    nextInput = handleComponentInput(nextInput, nextVNode);\r\n                    patch(lastInput, nextInput, parentDom, lifecycle, context, isSVG);\r\n                    nextVNode.children = nextInput;\r\n                    nextVNode.dom = nextInput.dom;\r\n                    if (nextHooksDefined && isFunction(nextHooks.onComponentDidUpdate)) {\r\n                        nextHooks.onComponentDidUpdate(lastProps, nextProps);\r\n                    }\r\n                }\r\n            }\r\n            else if (lastInput.flags & 14 /* Component */) {\r\n                lastInput.parentVNode = nextVNode;\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction patchText(lastVNode, nextVNode, parentDom) {\r\n    var nextText = nextVNode.children;\r\n    var textNode = parentDom.firstChild;\r\n    var dom;\r\n    // Guard against external change on DOM node.\r\n    if (isNull(textNode)) {\r\n        parentDom.textContent = nextText;\r\n        dom = parentDom.firstChild;\r\n    }\r\n    else {\r\n        dom = lastVNode.dom;\r\n        if (nextText !== lastVNode.children) {\r\n            dom.nodeValue = nextText;\r\n        }\r\n    }\r\n    nextVNode.dom = dom;\r\n}\r\nfunction patchNonKeyedChildren(lastChildren, nextChildren, dom, lifecycle, context, isSVG, lastChildrenLength, nextChildrenLength) {\r\n    var commonLength = lastChildrenLength > nextChildrenLength ? nextChildrenLength : lastChildrenLength;\r\n    var i = 0;\r\n    for (; i < commonLength; i++) {\r\n        var nextChild = nextChildren[i];\r\n        if (nextChild.dom) {\r\n            nextChild = nextChildren[i] = directClone(nextChild);\r\n        }\r\n        patch(lastChildren[i], nextChild, dom, lifecycle, context, isSVG);\r\n    }\r\n    if (lastChildrenLength < nextChildrenLength) {\r\n        for (i = commonLength; i < nextChildrenLength; i++) {\r\n            var nextChild$1 = nextChildren[i];\r\n            if (nextChild$1.dom) {\r\n                nextChild$1 = nextChildren[i] = directClone(nextChild$1);\r\n            }\r\n            mount(nextChild$1, dom, lifecycle, context, isSVG);\r\n        }\r\n    }\r\n    else if (lastChildrenLength > nextChildrenLength) {\r\n        for (i = commonLength; i < lastChildrenLength; i++) {\r\n            remove(lastChildren[i], dom);\r\n        }\r\n    }\r\n}\r\nfunction patchKeyedChildren(a, b, dom, lifecycle, context, isSVG, aLength, bLength) {\r\n    var aEnd = aLength - 1;\r\n    var bEnd = bLength - 1;\r\n    var aStart = 0;\r\n    var bStart = 0;\r\n    var i;\r\n    var j;\r\n    var aNode = a[aStart];\r\n    var bNode = b[bStart];\r\n    var nextNode;\r\n    var nextPos;\r\n    // Step 1\r\n    // tslint:disable-next-line\r\n    outer: {\r\n        // Sync nodes with the same key at the beginning.\r\n        while (aNode.key === bNode.key) {\r\n            if (bNode.dom) {\r\n                b[bStart] = bNode = directClone(bNode);\r\n            }\r\n            patch(aNode, bNode, dom, lifecycle, context, isSVG);\r\n            aStart++;\r\n            bStart++;\r\n            if (aStart > aEnd || bStart > bEnd) {\r\n                break outer;\r\n            }\r\n            aNode = a[aStart];\r\n            bNode = b[bStart];\r\n        }\r\n        aNode = a[aEnd];\r\n        bNode = b[bEnd];\r\n        // Sync nodes with the same key at the end.\r\n        while (aNode.key === bNode.key) {\r\n            if (bNode.dom) {\r\n                b[bEnd] = bNode = directClone(bNode);\r\n            }\r\n            patch(aNode, bNode, dom, lifecycle, context, isSVG);\r\n            aEnd--;\r\n            bEnd--;\r\n            if (aStart > aEnd || bStart > bEnd) {\r\n                break outer;\r\n            }\r\n            aNode = a[aEnd];\r\n            bNode = b[bEnd];\r\n        }\r\n    }\r\n    if (aStart > aEnd) {\r\n        if (bStart <= bEnd) {\r\n            nextPos = bEnd + 1;\r\n            nextNode = nextPos < bLength ? b[nextPos].dom : null;\r\n            while (bStart <= bEnd) {\r\n                bNode = b[bStart];\r\n                if (bNode.dom) {\r\n                    b[bStart] = bNode = directClone(bNode);\r\n                }\r\n                bStart++;\r\n                insertOrAppend(dom, mount(bNode, null, lifecycle, context, isSVG), nextNode);\r\n            }\r\n        }\r\n    }\r\n    else if (bStart > bEnd) {\r\n        while (aStart <= aEnd) {\r\n            remove(a[aStart++], dom);\r\n        }\r\n    }\r\n    else {\r\n        var aLeft = aEnd - aStart + 1;\r\n        var bLeft = bEnd - bStart + 1;\r\n        var sources = new Array(bLeft);\r\n        for (i = 0; i < bLeft; i++) {\r\n            sources[i] = -1;\r\n        }\r\n        // Keep track if its possible to remove whole DOM using textContent = '';\r\n        var canRemoveWholeContent = aLeft === aLength;\r\n        var moved = false;\r\n        var pos = 0;\r\n        var patched = 0;\r\n        // When sizes are small, just loop them through\r\n        if (bLeft <= 4 || aLeft * bLeft <= 16) {\r\n            for (i = aStart; i <= aEnd; i++) {\r\n                aNode = a[i];\r\n                if (patched < bLeft) {\r\n                    for (j = bStart; j <= bEnd; j++) {\r\n                        bNode = b[j];\r\n                        if (aNode.key === bNode.key) {\r\n                            sources[j - bStart] = i;\r\n                            if (canRemoveWholeContent) {\r\n                                canRemoveWholeContent = false;\r\n                                while (i > aStart) {\r\n                                    remove(a[aStart++], dom);\r\n                                }\r\n                            }\r\n                            if (pos > j) {\r\n                                moved = true;\r\n                            }\r\n                            else {\r\n                                pos = j;\r\n                            }\r\n                            if (bNode.dom) {\r\n                                b[j] = bNode = directClone(bNode);\r\n                            }\r\n                            patch(aNode, bNode, dom, lifecycle, context, isSVG);\r\n                            patched++;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (!canRemoveWholeContent && j > bEnd) {\r\n                        remove(aNode, dom);\r\n                    }\r\n                }\r\n                else if (!canRemoveWholeContent) {\r\n                    remove(aNode, dom);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            var keyIndex = {};\r\n            // Map keys by their index in array\r\n            for (i = bStart; i <= bEnd; i++) {\r\n                keyIndex[b[i].key] = i;\r\n            }\r\n            // Try to patch same keys\r\n            for (i = aStart; i <= aEnd; i++) {\r\n                aNode = a[i];\r\n                if (patched < bLeft) {\r\n                    j = keyIndex[aNode.key];\r\n                    if (isDefined(j)) {\r\n                        if (canRemoveWholeContent) {\r\n                            canRemoveWholeContent = false;\r\n                            while (i > aStart) {\r\n                                remove(a[aStart++], dom);\r\n                            }\r\n                        }\r\n                        bNode = b[j];\r\n                        sources[j - bStart] = i;\r\n                        if (pos > j) {\r\n                            moved = true;\r\n                        }\r\n                        else {\r\n                            pos = j;\r\n                        }\r\n                        if (bNode.dom) {\r\n                            b[j] = bNode = directClone(bNode);\r\n                        }\r\n                        patch(aNode, bNode, dom, lifecycle, context, isSVG);\r\n                        patched++;\r\n                    }\r\n                    else if (!canRemoveWholeContent) {\r\n                        remove(aNode, dom);\r\n                    }\r\n                }\r\n                else if (!canRemoveWholeContent) {\r\n                    remove(aNode, dom);\r\n                }\r\n            }\r\n        }\r\n        // fast-path: if nothing patched remove all old and add all new\r\n        if (canRemoveWholeContent) {\r\n            removeAllChildren(dom, a);\r\n            mountArrayChildren(b, dom, lifecycle, context, isSVG);\r\n        }\r\n        else {\r\n            if (moved) {\r\n                var seq = lis_algorithm(sources);\r\n                j = seq.length - 1;\r\n                for (i = bLeft - 1; i >= 0; i--) {\r\n                    if (sources[i] === -1) {\r\n                        pos = i + bStart;\r\n                        bNode = b[pos];\r\n                        if (bNode.dom) {\r\n                            b[pos] = bNode = directClone(bNode);\r\n                        }\r\n                        nextPos = pos + 1;\r\n                        insertOrAppend(dom, mount(bNode, null, lifecycle, context, isSVG), nextPos < bLength ? b[nextPos].dom : null);\r\n                    }\r\n                    else if (j < 0 || i !== seq[j]) {\r\n                        pos = i + bStart;\r\n                        bNode = b[pos];\r\n                        nextPos = pos + 1;\r\n                        insertOrAppend(dom, bNode.dom, nextPos < bLength ? b[nextPos].dom : null);\r\n                    }\r\n                    else {\r\n                        j--;\r\n                    }\r\n                }\r\n            }\r\n            else if (patched !== bLeft) {\r\n                // when patched count doesn't match b length we need to insert those new ones\r\n                // loop backwards so we can use insertBefore\r\n                for (i = bLeft - 1; i >= 0; i--) {\r\n                    if (sources[i] === -1) {\r\n                        pos = i + bStart;\r\n                        bNode = b[pos];\r\n                        if (bNode.dom) {\r\n                            b[pos] = bNode = directClone(bNode);\r\n                        }\r\n                        nextPos = pos + 1;\r\n                        insertOrAppend(dom, mount(bNode, null, lifecycle, context, isSVG), nextPos < bLength ? b[nextPos].dom : null);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n// // https://en.wikipedia.org/wiki/Longest_increasing_subsequence\r\nfunction lis_algorithm(arr) {\r\n    var p = arr.slice();\r\n    var result = [0];\r\n    var i;\r\n    var j;\r\n    var u;\r\n    var v;\r\n    var c;\r\n    var len = arr.length;\r\n    for (i = 0; i < len; i++) {\r\n        var arrI = arr[i];\r\n        if (arrI !== -1) {\r\n            j = result[result.length - 1];\r\n            if (arr[j] < arrI) {\r\n                p[i] = j;\r\n                result.push(i);\r\n                continue;\r\n            }\r\n            u = 0;\r\n            v = result.length - 1;\r\n            while (u < v) {\r\n                c = ((u + v) / 2) | 0;\r\n                if (arr[result[c]] < arrI) {\r\n                    u = c + 1;\r\n                }\r\n                else {\r\n                    v = c;\r\n                }\r\n            }\r\n            if (arrI < arr[result[u]]) {\r\n                if (u > 0) {\r\n                    p[i] = result[u - 1];\r\n                }\r\n                result[u] = i;\r\n            }\r\n        }\r\n    }\r\n    u = result.length;\r\n    v = result[u - 1];\r\n    while (u-- > 0) {\r\n        result[u] = v;\r\n        v = p[v];\r\n    }\r\n    return result;\r\n}\n\nvar roots = options.roots;\r\nvar documentBody = isBrowser ? document.body : null;\r\nfunction render(input, parentDom, callback) {\r\n    if (input === NO_OP) {\r\n        return;\r\n    }\r\n    var rootLen = roots.length;\r\n    var rootInput;\r\n    var index;\r\n    for (index = 0; index < rootLen; index++) {\r\n        if (roots[index] === parentDom) {\r\n            rootInput = parentDom.$V;\r\n            break;\r\n        }\r\n    }\r\n    if (isUndefined(rootInput)) {\r\n        if (!isInvalid(input)) {\r\n            if (input.dom) {\r\n                input = directClone(input);\r\n            }\r\n            if (isNull(parentDom.firstChild)) {\r\n                mount(input, parentDom, LIFECYCLE, EMPTY_OBJ, false);\r\n                parentDom.$V = input;\r\n                roots.push(parentDom);\r\n            }\r\n            else {\r\n                hydrate(input, parentDom);\r\n            }\r\n            rootInput = input;\r\n        }\r\n    }\r\n    else {\r\n        if (isNullOrUndef(input)) {\r\n            remove(rootInput, parentDom);\r\n            roots.splice(index, 1);\r\n        }\r\n        else {\r\n            if (input.dom) {\r\n                input = directClone(input);\r\n            }\r\n            patch(rootInput, input, parentDom, LIFECYCLE, EMPTY_OBJ, false);\r\n            rootInput = parentDom.$V = input;\r\n        }\r\n    }\r\n    if (LIFECYCLE.length > 0) {\r\n        callAll(LIFECYCLE);\r\n    }\r\n    if (isFunction(callback)) {\r\n        callback();\r\n    }\r\n    if (rootInput && rootInput.flags & 14 /* Component */) {\r\n        return rootInput.children;\r\n    }\r\n    return;\r\n}\r\nfunction createRenderer(parentDom) {\r\n    return function renderer(lastInput, nextInput) {\r\n        if (!parentDom) {\r\n            parentDom = lastInput;\r\n        }\r\n        render(nextInput, parentDom);\r\n    };\r\n}\r\nfunction createPortal(children, container) {\r\n    return createVNode(1024 /* Portal */, container, null, children, 0 /* UnknownChildren */, null, isInvalid(children) ? null : children.key, null);\r\n}\n\nvar resolvedPromise = typeof Promise === 'undefined' ? null : Promise.resolve();\r\n// raf.bind(window) is needed to work around bug in IE10-IE11 strict mode (TypeError: Invalid calling object)\r\nvar fallbackMethod = typeof requestAnimationFrame === 'undefined' ? setTimeout : requestAnimationFrame.bind(window);\r\nfunction nextTick(fn) {\r\n    if (resolvedPromise) {\r\n        return resolvedPromise.then(fn);\r\n    }\r\n    return fallbackMethod(fn);\r\n}\r\nfunction queueStateChanges(component, newState, callback) {\r\n    if (isFunction(newState)) {\r\n        newState = newState(component.state, component.props, component.context);\r\n    }\r\n    var pending = component.$PS;\r\n    if (isNullOrUndef(pending)) {\r\n        component.$PS = newState;\r\n    }\r\n    else {\r\n        for (var stateKey in newState) {\r\n            pending[stateKey] = newState[stateKey];\r\n        }\r\n    }\r\n    if (!component.$PSS && !component.$BR) {\r\n        if (!component.$UPD) {\r\n            component.$PSS = true;\r\n            component.$UPD = true;\r\n            applyState(component, false, callback);\r\n            component.$UPD = false;\r\n        }\r\n        else {\r\n            // Async\r\n            var queue = component.$QU;\r\n            if (isNull(queue)) {\r\n                queue = component.$QU = [];\r\n                nextTick(promiseCallback(component, queue));\r\n            }\r\n            if (isFunction(callback)) {\r\n                queue.push(callback);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        component.$PSS = true;\r\n        if (component.$BR && isFunction(callback)) {\r\n            LIFECYCLE.push(callback.bind(component));\r\n        }\r\n    }\r\n}\r\nfunction promiseCallback(component, queue) {\r\n    return function () {\r\n        component.$QU = null;\r\n        component.$UPD = true;\r\n        applyState(component, false, function () {\r\n            for (var i = 0, len = queue.length; i < len; i++) {\r\n                queue[i].call(component);\r\n            }\r\n        });\r\n        component.$UPD = false;\r\n    };\r\n}\r\nfunction applyState(component, force, callback) {\r\n    if (component.$UN) {\r\n        return;\r\n    }\r\n    if (force || !component.$BR) {\r\n        component.$PSS = false;\r\n        var pendingState = component.$PS;\r\n        var prevState = component.state;\r\n        var nextState = combineFrom(prevState, pendingState);\r\n        var props = component.props;\r\n        var context = component.context;\r\n        component.$PS = null;\r\n        var vNode = component.$V;\r\n        var lastInput = component.$LI;\r\n        var parentDom = lastInput.dom && lastInput.dom.parentNode;\r\n        updateClassComponent(component, nextState, vNode, props, parentDom, LIFECYCLE, context, (vNode.flags & 32 /* SvgElement */) > 0, force, true);\r\n        if (component.$UN) {\r\n            return;\r\n        }\r\n        if ((component.$LI.flags & 1024 /* Portal */) === 0) {\r\n            var dom = component.$LI.dom;\r\n            while (!isNull((vNode = vNode.parentVNode))) {\r\n                if ((vNode.flags & 14 /* Component */) > 0) {\r\n                    vNode.dom = dom;\r\n                }\r\n            }\r\n        }\r\n        if (LIFECYCLE.length > 0) {\r\n            callAll(LIFECYCLE);\r\n        }\r\n    }\r\n    else {\r\n        component.state = component.$PS;\r\n        component.$PS = null;\r\n    }\r\n    if (isFunction(callback)) {\r\n        callback.call(component);\r\n    }\r\n}\r\nvar Component = function Component(props, context) {\r\n    this.state = null;\r\n    // Internal properties\r\n    this.$BR = false; // BLOCK RENDER\r\n    this.$BS = true; // BLOCK STATE\r\n    this.$PSS = false; // PENDING SET STATE\r\n    this.$PS = null; // PENDING STATE (PARTIAL or FULL)\r\n    this.$LI = null; // LAST INPUT\r\n    this.$V = null; // VNODE\r\n    this.$UN = false; // UNMOUNTED\r\n    this.$CX = null; // CHILDCONTEXT\r\n    this.$UPD = true; // UPDATING\r\n    this.$QU = null; // QUEUE\r\n    /** @type {object} */\r\n    this.props = props || EMPTY_OBJ;\r\n    /** @type {object} */\r\n    this.context = context || EMPTY_OBJ; // context should not be mutable\r\n};\r\nComponent.prototype.forceUpdate = function forceUpdate (callback) {\r\n    if (this.$UN) {\r\n        return;\r\n    }\r\n    applyState(this, true, callback);\r\n};\r\nComponent.prototype.setState = function setState (newState, callback) {\r\n    if (this.$UN) {\r\n        return;\r\n    }\r\n    if (!this.$BS) {\r\n        queueStateChanges(this, newState, callback);\r\n    }\r\n    else {\r\n        return;\r\n    }\r\n};\r\n// tslint:disable-next-line:no-empty\r\nComponent.prototype.render = function render (nextProps, nextState, nextContext) {\r\n    return undefined;\r\n};\r\n// Public\r\nComponent.defaultProps = null;\n\n\n\nvar JSX = /*#__PURE__*/Object.freeze({\n\n});\n\nvar version = \"5.0.1\";\n\nexport { Component, EMPTY_OBJ, NO_OP, createComponentVNode, createPortal, createRenderer, createTextVNode, createVNode, directClone, getFlagsForElementVnode, getNumberStyleValue, hydrate, linkEvent, normalizeProps, options, render, version, JSX };\n","export * from './dist/index.esm.js';\n\nif (process.env.NODE_ENV !== 'production') {\n  console.warn('You are running production build of Inferno in development mode. Use dev:module entry point.');\n}\n","import { Component } from 'inferno';\n\nvar Component$1 = Component;\n\nexport default Component$1;\nexport { Component$1 as Component };\n","import Component from 'inferno-component';\n\nexport default class Box extends Component {\n\trender({ n }) {\n\t\tif (n <= 0) {\n\t\t\treturn <p>Hi</p>;\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"box\">\n\t\t\t\t<Box n={n - 1} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import Component from 'inferno-component';\nimport Box from './Box';\n\nexport default class Frame extends Component {\n\tstate = { n: 30 };\n\tlastLoc = 0;\n\tcomponentDidMount() {\n\t\tdocument.addEventListener('scroll', this.onScroll);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('scroll', this.onScroll);\n\t}\n\n\tonScroll = () => {\n\t\tlet { scrollY } = window;\n\t\tlet diff = scrollY - this.lastLoc;\n\t\tthis.lastLoc = scrollY;\n\t\tlet d = diff < 0 ? -1 : 1;\n\t\tconsole.log(d);\n\t\tthis.setState({ n: this.state.n + d });\n\t};\n\n\trender({}, { n = 8 }) {\n\t\treturn (\n\t\t\t<div className=\"frame\">\n\t\t\t\t<Box n={n} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n","import { render } from \"inferno\";\n\nimport Frame from \"./src/Frame\";\nimport styles from \"./src/styles.css\";\n\nconst mountNode = document.getElementById(\"root\");\n\nrender(<Frame />, mountNode, mountNode.lastChild);\n\n// Hot Module Replacement\nif (module.hot) {\n  module.hot.accept();\n}\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}